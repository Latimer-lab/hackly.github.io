{"version":3,"file":"index-CyhgV2ri.js","sources":["../../frontend/scripts/app.js"],"sourcesContent":["// Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAhqF7t5-3pKVf5a3O8xR60OokawSRuiK0\",\n  authDomain: \"hackly-mvp.firebaseapp.com\",\n  projectId: \"hackly-mvp\",\n  storageBucket: \"hackly-mvp.firebasestorage.app\",\n  messagingSenderId: \"827934530206\",\n  appId: \"1:827934530206:web:74e3b56884475c871bf98f\",\n  measurementId: \"G-J140SVTKRV\"\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\n\n// Add these variables for sorting and searching\nlet currentSortField = 'createdAt';\nlet currentSortDirection = 'desc';\nlet currentSearchTerm = '';\nlet currentPage = 1;\nconst itemsPerPage = 10;\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    loadIdeas();\n\n    const createTabButton = document.getElementById(\"create_tab_button\");\n    const ideaForm = document.getElementById(\"idea_form\");\n    const desktopButton = document.getElementById(\"submit_idea_desktop\");\n    const mobileButton = document.getElementById(\"submit_idea_mobile\");\n    \n    if (desktopButton) desktopButton.addEventListener(\"click\", () => {\n        const title = document.getElementById(\"title_desktop\").value.trim();\n        if (title) {\n            createNewIdea(title, false);\n        }\n    });\n    if (mobileButton) mobileButton.addEventListener(\"click\", () => {\n        const title = document.getElementById(\"title_mobile\").value.trim();\n        if (title) {\n            createNewIdea(title, true);\n        }\n    });\n    \n    // Add sort and search event listeners\n    const sortDateButtons = document.querySelectorAll('.sort_by_date');\n    const sortRankButtons = document.querySelectorAll('.sort_by_rank');\n    const searchInputs = document.querySelectorAll('.search_input');\n\n    // Add click handlers to all date sort buttons\n    sortDateButtons.forEach(button => {\n        button.addEventListener('click', () => {\n            if (currentSortField === 'createdAt') {\n                currentSortDirection = currentSortDirection === 'desc' ? 'asc' : 'desc';\n            } else {\n                currentSortField = 'createdAt';\n                currentSortDirection = 'desc';\n            }\n            updateSortIcons(sortDateButtons);\n            loadIdeas();\n        });\n    });\n\n    // Add click handlers to all rank sort buttons\n    sortRankButtons.forEach(button => {\n        button.addEventListener('click', () => {\n            if (currentSortField === 'views') {\n                currentSortDirection = currentSortDirection === 'desc' ? 'asc' : 'desc';\n            } else {\n                currentSortField = 'views';\n                currentSortDirection = 'desc';\n            }\n            updateSortIcons(sortRankButtons);\n            loadIdeas();\n        });\n    });\n\n    // Add input handler to all search inputs\n    searchInputs.forEach(input => {\n        input.addEventListener('input', (e) => {\n            currentSearchTerm = e.target.value.toLowerCase();\n            currentPage = 1; // Reset to first page on search\n            loadIdeas();\n        });\n    });\n\n    // Add pagination event listeners\n    const prevPageButton = document.getElementById('prev_page');\n    const nextPageButton = document.getElementById('next_page');\n\n    if (prevPageButton) {\n        prevPageButton.addEventListener('click', () => {\n            if (currentPage > 1) {\n                currentPage--;\n                loadIdeas();\n            }\n        });\n    }\n\n    if (nextPageButton) {\n        nextPageButton.addEventListener('click', () => {\n            currentPage++;\n            loadIdeas();\n        });\n    }\n    \n    // Gestion des onglets\n    const tabLinks = document.querySelectorAll(\".tab_link\");\n    const tabContents = document.querySelectorAll(\".tab_content\");\n\n    tabLinks.forEach((tab) => {\n        tab.addEventListener(\"click\", () => {\n            tabLinks.forEach((t) => t.classList.remove(\"active\"));\n            tabContents.forEach((c) => c.classList.remove(\"active\"));\n\n            tab.classList.add(\"active\");\n            document.getElementById(tab.dataset.tab).classList.add(\"active\");\n        });\n    });\n\n    // Gestion des modals\n    const modal = document.getElementById(\"doc_modal\");\n    const closeModalButton = document.getElementById(\"close_doc_modal\");\n    const docIframe = document.getElementById(\"doc_iframe\");\n\n    window.openDocModal = async function(id, docLink) {\n        if (!docLink) {\n            alert('Document is still being processed. Please try again in a few moments.');\n            return;\n        }\n        \n        const docIframe = document.getElementById(\"doc_iframe\");\n        const modal = document.getElementById(\"doc_modal\");\n        \n        docIframe.src = docLink;\n        modal.style.display = \"block\";\n        document.body.classList.add(\"no-scroll\");\n\n        const ideaRef = db.collection(\"documents\").doc(id);\n        await ideaRef.update({\n            views: firebase.firestore.FieldValue.increment(1)\n        });\n    };\n\n    closeModalButton.addEventListener(\"click\", (e) => {\n        e.preventDefault();\n        modal.style.display = \"none\";\n        docIframe.src = \"\";\n        document.body.classList.remove(\"no-scroll\");\n    });\n\n    window.addEventListener(\"click\", (event) => {\n        if (event.target === modal) {\n            modal.style.display = \"none\";\n            docIframe.src = \"\";\n            document.body.classList.remove(\"no-scroll\");\n        }\n    });\n});\n\nfunction updateSortIcons(buttons) {\n    buttons.forEach(button => {\n        const icon = button.querySelector('.sort_icon');\n        if (icon) {\n            icon.textContent = currentSortDirection === 'desc' ? 'arrow_downward' : 'arrow_upward';\n        }\n    });\n}\n\nasync function loadIdeas() {\n    console.log(\"Loading ideas...\");\n\n    let ideaListElement = document.querySelector(\".idea_list_item\");\n    let ideasCountElement = document.getElementById(\"ideas_count\");\n    let currentPageElement = document.getElementById(\"current_page\");\n    let prevPageButton = document.getElementById('prev_page');\n    let nextPageButton = document.getElementById('next_page');\n\n    if (!ideaListElement || !ideasCountElement) {\n        console.error(\"Elements not found in DOM.\");\n        return;\n    }\n\n    ideaListElement.innerHTML = \"<li>Loading ideas...</li>\";\n    ideasCountElement.innerText = \"Loading ideas...\";\n\n    try {\n        const querySnapshot = await db.collection(\"documents\").get();\n        let ideas = [];\n        \n        // Convert to array and filter by search term\n        querySnapshot.forEach((doc) => {\n            const idea = doc.data();\n            if (currentSearchTerm === '' || \n                idea.title.toLowerCase().includes(currentSearchTerm)) {\n                ideas.push({ id: doc.id, ...idea });\n            }\n        });\n\n        // Sort the ideas\n        ideas.sort((a, b) => {\n            let comparison = 0;\n            if (currentSortField === 'createdAt') {\n                const dateA = a.createdAt?.seconds || 0;\n                const dateB = b.createdAt?.seconds || 0;\n                comparison = dateA - dateB;\n            } else if (currentSortField === 'views') {\n                comparison = (a.views || 0) - (b.views || 0);\n            }\n            return currentSortDirection === 'desc' ? -comparison : comparison;\n        });\n\n        // Calculate pagination\n        const totalPages = Math.ceil(ideas.length / itemsPerPage);\n        \n        // Ensure current page is valid\n        if (currentPage > totalPages) {\n            currentPage = totalPages || 1;\n        }\n        \n        const startIndex = (currentPage - 1) * itemsPerPage;\n        const endIndex = startIndex + itemsPerPage;\n        const paginatedIdeas = ideas.slice(startIndex, endIndex);\n\n        // Update pagination controls\n        if (currentPageElement) {\n            currentPageElement.textContent = currentPage;\n        }\n        if (prevPageButton) {\n            prevPageButton.disabled = currentPage === 1;\n        }\n        if (nextPageButton) {\n            nextPageButton.disabled = currentPage >= totalPages;\n        }\n\n        // Update the count\n        ideasCountElement.innerText = `Total Ideas: ${ideas.length}`;\n\n        // Clear the list\n        ideaListElement.innerHTML = \"\";\n\n        if (paginatedIdeas.length === 0) {\n            ideaListElement.innerHTML = \"<li>No ideas found.</li>\";\n            return;\n        }\n\n        // Add the ideas to the list\n        paginatedIdeas.forEach((idea) => {\n            const listItem = document.createElement(\"li\");\n            listItem.innerHTML = `\n                <a href=\"#\" class=\"idea_container\" onclick=\"openDocModal('${idea.id}', '${idea.googleDocWebViewUrl || ''}')\">\n                    <div class=\"idea_date\" id=\"idea_date\">${idea.createdAt \n                        ? new Date(idea.createdAt.seconds * 1000)\n                            .toLocaleDateString(\"fr-FR\", { year: \"2-digit\", month: \"2-digit\", day: \"2-digit\" })\n                            .replace(/\\//g, \"-\") \n                        : \"Unknown\"\n                    }</div>\n                    <div class=\"responsive_info\">\n                        <div class=\"idea_date\" id=\"responsive_idea_date\">${idea.createdAt \n                            ? new Date(idea.createdAt.seconds * 1000)\n                                .toLocaleDateString(\"fr-FR\", { year: \"2-digit\", month: \"2-digit\", day: \"2-digit\" })\n                                .replace(/\\//g, \"-\") \n                            : \"Unknown\"\n                        }</div>\n                        <div class=\"idea_views\" id=\"responsive_idea_views\"><span class=\"material-icons\">ads_click</span>  ${idea.views || 0}</div>\n                    </div>\n                    <div class=\"idea_name\">${idea.title}</div>\n                    <div class=\"idea_views\" id=\"idea_views\"><span class=\"material-icons\">ads_click</span>  ${idea.views || 0}</div>\n                </a>\n            `;\n            ideaListElement.appendChild(listItem);\n        });\n    } catch (error) {\n        console.error(\"Error loading ideas:\", error);\n        ideasCountElement.innerText = \"Error loading ideas\";\n        ideaListElement.innerHTML = \"<li>Error loading ideas.</li>\";\n    }\n}\n"],"names":["firebaseConfig","db","currentSortField","currentSortDirection","currentSearchTerm","currentPage","itemsPerPage","loadIdeas","desktopButton","mobileButton","title","sortDateButtons","sortRankButtons","searchInputs","button","updateSortIcons","input","e","prevPageButton","nextPageButton","tabLinks","tabContents","tab","t","c","modal","closeModalButton","docIframe","id","docLink","event","buttons","icon","ideaListElement","ideasCountElement","currentPageElement","querySnapshot","ideas","doc","idea","a","b","comparison","dateA","_a","dateB","_b","totalPages","startIndex","endIndex","paginatedIdeas","listItem","error"],"mappings":"ssBACA,MAAMA,EAAiB,CACrB,OAAQ,0CACR,WAAY,6BACZ,UAAW,aACX,cAAe,iCACf,kBAAmB,eACnB,MAAO,4CACP,cAAe,cACjB,EAGA,SAAS,cAAcA,CAAc,EACrC,MAAMC,EAAK,SAAS,UAAW,EAG/B,IAAIC,EAAmB,YACnBC,EAAuB,OACvBC,EAAoB,GACpBC,EAAc,EAClB,MAAMC,EAAe,GAErB,SAAS,iBAAiB,mBAAoB,IAAM,CAChDC,EAAW,EAEa,SAAS,eAAe,mBAAmB,EAClD,SAAS,eAAe,WAAW,EACpD,MAAMC,EAAgB,SAAS,eAAe,qBAAqB,EAC7DC,EAAe,SAAS,eAAe,oBAAoB,EAE7DD,GAAeA,EAAc,iBAAiB,QAAS,IAAM,CAC7D,MAAME,EAAQ,SAAS,eAAe,eAAe,EAAE,MAAM,KAAM,EAC/DA,GACA,cAAcA,EAAO,EAAK,CAEtC,CAAK,EACGD,GAAcA,EAAa,iBAAiB,QAAS,IAAM,CAC3D,MAAMC,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,KAAM,EAC9DA,GACA,cAAcA,EAAO,EAAI,CAErC,CAAK,EAGD,MAAMC,EAAkB,SAAS,iBAAiB,eAAe,EAC3DC,EAAkB,SAAS,iBAAiB,eAAe,EAC3DC,EAAe,SAAS,iBAAiB,eAAe,EAG9DF,EAAgB,QAAQG,GAAU,CAC9BA,EAAO,iBAAiB,QAAS,IAAM,CAC/BZ,IAAqB,YACrBC,EAAuBA,IAAyB,OAAS,MAAQ,QAEjED,EAAmB,YACnBC,EAAuB,QAE3BY,EAAgBJ,CAAe,EAC/BJ,EAAW,CACvB,CAAS,CACT,CAAK,EAGDK,EAAgB,QAAQE,GAAU,CAC9BA,EAAO,iBAAiB,QAAS,IAAM,CAC/BZ,IAAqB,QACrBC,EAAuBA,IAAyB,OAAS,MAAQ,QAEjED,EAAmB,QACnBC,EAAuB,QAE3BY,EAAgBH,CAAe,EAC/BL,EAAW,CACvB,CAAS,CACT,CAAK,EAGDM,EAAa,QAAQG,GAAS,CAC1BA,EAAM,iBAAiB,QAAUC,GAAM,CACnCb,EAAoBa,EAAE,OAAO,MAAM,YAAa,EAChDZ,EAAc,EACdE,EAAW,CACvB,CAAS,CACT,CAAK,EAGD,MAAMW,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAiB,SAAS,eAAe,WAAW,EAEtDD,GACAA,EAAe,iBAAiB,QAAS,IAAM,CACvCb,EAAc,IACdA,IACAE,EAAW,EAE3B,CAAS,EAGDY,GACAA,EAAe,iBAAiB,QAAS,IAAM,CAC3Cd,IACAE,EAAW,CACvB,CAAS,EAIL,MAAMa,EAAW,SAAS,iBAAiB,WAAW,EAChDC,EAAc,SAAS,iBAAiB,cAAc,EAE5DD,EAAS,QAASE,GAAQ,CACtBA,EAAI,iBAAiB,QAAS,IAAM,CAChCF,EAAS,QAASG,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACpDF,EAAY,QAASG,GAAMA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAEvDF,EAAI,UAAU,IAAI,QAAQ,EAC1B,SAAS,eAAeA,EAAI,QAAQ,GAAG,EAAE,UAAU,IAAI,QAAQ,CAC3E,CAAS,CACT,CAAK,EAGD,MAAMG,EAAQ,SAAS,eAAe,WAAW,EAC3CC,EAAmB,SAAS,eAAe,iBAAiB,EAC5DC,EAAY,SAAS,eAAe,YAAY,EAEtD,OAAO,aAAe,eAAeC,EAAIC,EAAS,CAC9C,GAAI,CAACA,EAAS,CACV,MAAM,uEAAuE,EAC7E,MACZ,CAEQ,MAAMF,EAAY,SAAS,eAAe,YAAY,EAChDF,EAAQ,SAAS,eAAe,WAAW,EAEjDE,EAAU,IAAME,EAChBJ,EAAM,MAAM,QAAU,QACtB,SAAS,KAAK,UAAU,IAAI,WAAW,EAGvC,MADgBxB,EAAG,WAAW,WAAW,EAAE,IAAI2B,CAAE,EACnC,OAAO,CACjB,MAAO,SAAS,UAAU,WAAW,UAAU,CAAC,CAC5D,CAAS,CACJ,EAEDF,EAAiB,iBAAiB,QAAU,GAAM,CAC9C,EAAE,eAAgB,EAClBD,EAAM,MAAM,QAAU,OACtBE,EAAU,IAAM,GAChB,SAAS,KAAK,UAAU,OAAO,WAAW,CAClD,CAAK,EAED,OAAO,iBAAiB,QAAUG,GAAU,CACpCA,EAAM,SAAWL,IACjBA,EAAM,MAAM,QAAU,OACtBE,EAAU,IAAM,GAChB,SAAS,KAAK,UAAU,OAAO,WAAW,EAEtD,CAAK,CACL,CAAC,EAED,SAASZ,EAAgBgB,EAAS,CAC9BA,EAAQ,QAAQjB,GAAU,CACtB,MAAMkB,EAAOlB,EAAO,cAAc,YAAY,EAC1CkB,IACAA,EAAK,YAAc7B,IAAyB,OAAS,iBAAmB,eAEpF,CAAK,CACL,CAEA,eAAeI,GAAY,CACvB,QAAQ,IAAI,kBAAkB,EAE9B,IAAI0B,EAAkB,SAAS,cAAc,iBAAiB,EAC1DC,EAAoB,SAAS,eAAe,aAAa,EACzDC,EAAqB,SAAS,eAAe,cAAc,EAC3DjB,EAAiB,SAAS,eAAe,WAAW,EACpDC,EAAiB,SAAS,eAAe,WAAW,EAExD,GAAI,CAACc,GAAmB,CAACC,EAAmB,CACxC,QAAQ,MAAM,4BAA4B,EAC1C,MACR,CAEID,EAAgB,UAAY,4BAC5BC,EAAkB,UAAY,mBAE9B,GAAI,CACA,MAAME,EAAgB,MAAMnC,EAAG,WAAW,WAAW,EAAE,IAAK,EAC5D,IAAIoC,EAAQ,CAAE,EAGdD,EAAc,QAASE,GAAQ,CAC3B,MAAMC,EAAOD,EAAI,KAAM,GACnBlC,IAAsB,IACtBmC,EAAK,MAAM,YAAa,EAAC,SAASnC,CAAiB,IACnDiC,EAAM,KAAK,CAAE,GAAIC,EAAI,GAAI,GAAGC,EAAM,CAElD,CAAS,EAGDF,EAAM,KAAK,CAACG,EAAGC,IAAM,SACjB,IAAIC,EAAa,EACjB,GAAIxC,IAAqB,YAAa,CAClC,MAAMyC,IAAQC,EAAAJ,EAAE,YAAF,YAAAI,EAAa,UAAW,EAChCC,IAAQC,EAAAL,EAAE,YAAF,YAAAK,EAAa,UAAW,EACtCJ,EAAaC,EAAQE,CACrC,MAAuB3C,IAAqB,UAC5BwC,GAAcF,EAAE,OAAS,IAAMC,EAAE,OAAS,IAE9C,OAAOtC,IAAyB,OAAS,CAACuC,EAAaA,CACnE,CAAS,EAGD,MAAMK,EAAa,KAAK,KAAKV,EAAM,OAAS/B,CAAY,EAGpDD,EAAc0C,IACd1C,EAAc0C,GAAc,GAGhC,MAAMC,GAAc3C,EAAc,GAAKC,EACjC2C,EAAWD,EAAa1C,EACxB4C,EAAiBb,EAAM,MAAMW,EAAYC,CAAQ,EAmBvD,GAhBId,IACAA,EAAmB,YAAc9B,GAEjCa,IACAA,EAAe,SAAWb,IAAgB,GAE1Cc,IACAA,EAAe,SAAWd,GAAe0C,GAI7Cb,EAAkB,UAAY,gBAAgBG,EAAM,MAAM,GAG1DJ,EAAgB,UAAY,GAExBiB,EAAe,SAAW,EAAG,CAC7BjB,EAAgB,UAAY,2BAC5B,MACZ,CAGQiB,EAAe,QAASX,GAAS,CAC7B,MAAMY,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAY;AAAA,4EAC2CZ,EAAK,EAAE,OAAOA,EAAK,qBAAuB,EAAE;AAAA,4DAC5DA,EAAK,UACvC,IAAI,KAAKA,EAAK,UAAU,QAAU,GAAI,EACnC,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,UAAW,IAAK,SAAW,CAAA,EACjF,QAAQ,MAAO,GAAG,EACrB,SACL;AAAA;AAAA,2EAEsDA,EAAK,UAClD,IAAI,KAAKA,EAAK,UAAU,QAAU,GAAI,EACnC,mBAAmB,QAAS,CAAE,KAAM,UAAW,MAAO,UAAW,IAAK,SAAW,CAAA,EACjF,QAAQ,MAAO,GAAG,EACrB,SACL;AAAA,4HACmGA,EAAK,OAAS,CAAC;AAAA;AAAA,6CAE9FA,EAAK,KAAK;AAAA,6GACsDA,EAAK,OAAS,CAAC;AAAA;AAAA,cAGhHN,EAAgB,YAAYkB,CAAQ,CAChD,CAAS,CACJ,OAAQC,EAAO,CACZ,QAAQ,MAAM,uBAAwBA,CAAK,EAC3ClB,EAAkB,UAAY,sBAC9BD,EAAgB,UAAY,+BACpC,CACA"}